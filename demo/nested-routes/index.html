<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>nested-routes</title>
	<style>
		.parent {
		    border: 1px solid #000;
		    padding: 10px;
		}
		.child {
		    border: 1px solid #f66;
		    padding: 10px 20px;
		}
	</style>
</head>
<body>
	<div id="app"></div>
	<script src="../../dist/vue.js"></script>
	<script src="../../dist/vue-router.js"></script>
	<script>
		// 定义组件
		let Parent = {
			template: `
			    <div class="parent">
			        <h4> Parent </h4>
			        <router-view class="child"></router-view>
			    </div>
			`
		}

		let Default = {
			template: `
			    <div class="default">
			        Default
			    </div>
			`
		}

		let Foo = {
			template: ` 
			    <div class="foo">
			        Foo
			    </div>
			`
		}

		let Bar = {
			template: `
			    <div class="bar">
			        Bar
			    </div>
			`
		}

		let Baz = {
			template: `
			    <div class="baz">
			        <span>Baz</span>
			    </div>
			`
		}

		let Qux = {
			template: `
			    <div class="nested-parent qux">
			        <h5>qux</h5>
			        <router-link :to="{ name: 'quux' }"> /Quux </router-link>
			        <router-view/>
			    </div>
			`
		}

		let Quux = {
			template: `
			    <div class="quux">
			        <span>Quux</span>
			    </div>
			`
		}

		let Quy = {
			template: `
			    <div class="nested-parent quy">
			        <h5>quy</h5>
			        <pre> {{ JSON.stringify($route.params) }} </pre>
			    </div>
			`
		}

		let Zap = {
			template: `
			    <div class="zap">
			        <h5>zap</h5>
			        <pre> {{ $route.params.zapId }} </pre>
			    </div>
			`
		}

		// 定义路由实例
		const router = new VueRouter({
			routes: [
			    {
                    path: '/',
                    redirect: '/parent'
			    },
			    {
			    	path: '/parent',
			    	component: Parent,
			    	children: [
			    	    {
			    	    	path: '',
			    	    	component: Default // 提供一个 空的 子路由 components rendered at /parent: Root -> Parent -> Default
			    	    },
			    	    {
			    	    	path: 'foo',
			    	    	component: Foo // components rendered at /parent/foo: Root -> Parent -> Foo
			    	    },
			    	    {
			    	    	path: 'bar',
			    	    	component: Bar // components rendered at /parent/bar: Root -> Parent -> Bar
			    	    },
			    	    {
			    	    	path: '/baz',
			    	    	component: Baz //以 / 根路径开头充分的使用嵌套组件而无须设置嵌套的路径 components rendered at /baz: Root -> Parent -> Baz
			    	    },
			    	    {
			    	    	path: 'qux/:quxId',
			    	    	component: Qux,
			    	    	children: [
			    	    	    {
			    	    	    	path: 'quux',
			    	    	    	name: 'quux',
			    	    	    	component: Quux
			    	    	    }
			    	    	] // 嵌套路由再来个嵌套路由
			    	    },
			    	    {
			    	    	path: 'quy/:quyId',
			    	    	component: Quy
			    	    },
			    	    {
			    	    	name: 'zap',
			    	    	path: 'zap/:zapId?',
			    	    	component: Zap
			    	    }
			    	]
			    }
			]
		})

		let res = Vue.compile(`
            <div id="app">
                <h3>Nested Routed</h3>
                <ul>
                    <li>
                        <router-link to="/parent"> /parent </router-link>
                    </li>

                    <li>
                        <router-link to="/parent/foo"> parent的子路由 /parent/foo </router-link>
                    </li>

                    <li>
                        <router-link to="/parent/bar"> parent的子路由 /parent/bar </router-link>
                    </li>

                    <li>
                        <router-link to="/baz"> /baz </router-link>
                    </li>

                    <li>
                        <router-link to="/parent/qux/123"> /parent/qux </router-link>
                    </li>

                    <li>
                        <router-link to="/parent/quy/123"> /parent/quy </router-link>
                    </li>

                    <li>
                        <router-link :to="{ name: 'zap' }"> /parent/zap </router-link>
                    </li>

                    <li>
                        <router-link :to="{ name: 'zap', params: { zapId: 1 } }"> /parent/zap/1 </router-link>
                    </li>

                    <li>
                        <router-link :to="{ params: { zapId: 2 } }"> { params: { zapId: 2 }} (relative params) </router-link>
                    </li>
                </ul>
                <router-view class="view"></router-view>
            </div>
		`)

		// 注入路由
		let vm = new Vue({
			router,
			render: res.render,
			staticRenderFns: res.staticRenderFns
		}).$mount('#app')
	</script>
</body>
</html>